# 8. 제약사항 및 가정

## 8.1. 기술적 제약사항
- **PG사 연동 복잡성**: 각 PG사(이니시스, 나이스페이, 토스페이먼츠)마다 API 스펙, 연동 방식, 에러 코드 등이 상이하여 통합 및 유지보수에 추가적인 노력이 필요합니다.
- **트랜잭션 일관성**: 분산 트랜잭션(PG사 연동 + 내부 DB 트랜잭션)의 완전한 보장은 어려우며, 망취소와 같은 보상 트랜잭션 로직을 통해 최종 일관성을 확보합니다.
- **성능 최적화**: 현재는 기본적인 인덱스 및 쿼리 최적화가 적용되어 있으나, 대규모 트래픽 발생 시 추가적인 성능 튜닝(캐싱, 비동기 처리 확장 등)이 필요할 수 있습니다.
- **보안 구현의 한계**: 현재 시스템은 인증/인가, 데이터 암호화 등 보안 관련 기능이 최소한으로 구현되어 있습니다. 실제 운영 환경에서는 추가적인 보안 강화가 필수적입니다.

## 8.2. 비즈니스 제약사항
- **환불 정책**: 부분 환불, 다중 환불 등 복잡한 환불 정책은 현재 고려되지 않았습니다. 전체 주문 취소 및 전체 환불만 지원합니다.
- **상품 재고 관리**: 현재 시스템은 상품 재고 관리에 대한 명시적인 로직이 없습니다. 주문 시 재고 차감 및 취소 시 재고 복원 로직이 필요합니다.
- **포인트 유효 기간**: 포인트의 유효 기간, 소멸 정책 등은 현재 고려되지 않았습니다.
- **회원 등급/혜택**: 회원 등급별 차등 혜택, 포인트 적립률 등은 현재 고려되지 않았습니다.
- **관리자 기능**: 관리자 페이지 또는 관리자용 API는 최소한의 조회 기능만 제공하며, 상세한 관리 기능(예: 수동 결제 처리, 대량 상품 등록)은 구현되어 있지 않습니다.

## 8.3. 명시적 가정 (Assumptions)
- **PG사 API 안정성**: 연동되는 PG사의 API는 안정적으로 동작하며, 응답 지연이나 오류 발생 빈도가 낮다고 가정합니다.
- **네트워크 환경**: 서버와 PG사 간의 네트워크 통신은 안정적이라고 가정합니다.
- **데이터베이스 가용성**: PostgreSQL 데이터베이스는 항상 고가용성을 유지하며, 데이터 손실 없이 안정적으로 동작한다고 가정합니다.
- **프론트엔드 역할**: 프론트엔드는 PG사 결제창 호출 및 결제 결과 리턴 처리를 담당하며, 백엔드는 순수하게 비즈니스 로직 및 결제 승인/취소 처리를 담당한다고 가정합니다.
- **테스트 환경**: 개발 및 테스트 환경에서는 `netCancel` 플래그를 통해 망취소 테스트를 수행할 수 있다고 가정합니다.
- **시간대**: 모든 시간 관련 데이터(예: `createdAt`, `orderDate`, `paymentDate`)는 서버의 기본 시간대(UTC 또는 KST)를 기준으로 처리된다고 가정합니다.
