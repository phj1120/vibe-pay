<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vibe.pay.backend.order.OrderMapper">

    <resultMap id="orderResultMap" type="com.vibe.pay.backend.order.Order">
        <id property="orderId" column="order_id"/>
        <id property="ordSeq" column="ord_seq"/>
        <id property="ordProcSeq" column="ord_proc_seq"/>
        <result property="claimId" column="claim_id"/>
        <result property="memberId" column="member_id"/>
        <result property="orderDate" column="order_date"/>
        <result property="totalAmount" column="total_amount"/>
        <result property="status" column="status"/>
    </resultMap>

    <select id="findAll" resultMap="orderResultMap">
        SELECT /* OrderMapper.findAll */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
    </select>

    <select id="findByOrderId" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByOrderId */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE ORDER_ID = #{orderId}
      ORDER BY ORD_PROC_SEQ
    </select>

    <select id="findByOrderIdAndOrdProcSeq" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByOrderIdAndOrdProcSeq */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE ORDER_ID = #{orderId}
           AND ORD_PROC_SEQ = #{ordProcSeq}
    </select>

    <select id="findByOrderIdAndOrdProcSeqList" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByOrderIdAndOrdProcSeqList */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE ORDER_ID = #{orderId}
           AND ORD_PROC_SEQ = #{ordProcSeq}
      ORDER BY ORD_SEQ
    </select>

    <select id="findByOrderIdAndClaimId" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByOrderIdAndClaimId */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE ORDER_ID = #{orderId}
           AND CLAIM_ID = #{claimId}
    </select>

    <select id="findByMemberId" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByMemberId */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE MEMBER_ID = #{memberId}
      ORDER BY ORDER_DATE DESC
    </select>

    <select id="findByMemberIdAndOrdProcSeq" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByMemberIdAndOrdProcSeq */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE MEMBER_ID = #{memberId}
           AND ORD_PROC_SEQ = #{ordProcSeq}
      ORDER BY ORDER_DATE DESC
    </select>

    <select id="findByMemberIdAndOrdProcSeqWithPaging" resultMap="orderResultMap">
        SELECT /* OrderMapper.findByMemberIdAndOrdProcSeqWithPaging */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
          FROM ORDERS
         WHERE MEMBER_ID = #{memberId}
           AND ORD_PROC_SEQ = #{ordProcSeq}
      ORDER BY ORDER_DATE DESC
         LIMIT #{limit} OFFSET #{offset}
    </select>

    <insert id="insert">
        INSERT INTO ORDERS ( /* OrderMapper.insert */
               ORDER_ID
             , ORD_SEQ
             , ORD_PROC_SEQ
             , CLAIM_ID
             , MEMBER_ID
             , ORDER_DATE
             , TOTAL_AMOUNT
             , STATUS
        )
        VALUES (
               #{orderId}
             , #{ordSeq}
             , #{ordProcSeq}
             , #{claimId}
             , #{memberId}
             , #{orderDate}
             , #{totalAmount}
             , #{status}
        )
    </insert>

    <update id="update">
        UPDATE ORDERS /* OrderMapper.update */
           SET MEMBER_ID = #{memberId}
             , ORDER_DATE = #{orderDate}
             , TOTAL_AMOUNT = #{totalAmount}
             , STATUS = #{status}
         WHERE ORDER_ID = #{orderId}
           AND ORD_SEQ = #{ordSeq}
           AND ORD_PROC_SEQ = #{ordProcSeq}
    </update>

    <delete id="delete">
        DELETE /* OrderMapper.delete */
          FROM ORDERS
         WHERE ORDER_ID = #{orderId}
           AND ORD_SEQ = #{ordSeq}
           AND ORD_PROC_SEQ = #{ordProcSeq}
    </delete>

</mapper>
